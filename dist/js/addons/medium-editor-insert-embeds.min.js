/*!
 * medium-editor-insert-plugin v0.2.4 - jQuery insert plugin for MediumEditor
 *
 * Embeds Addon
 *
 * https://github.com/orthes/medium-editor-insert-plugin
 *
 * Copyright (c) 2014 Vexus2 (https://github.com/vexus2)
 * Released under the MIT license
 */
!function(a){a.fn.mediumInsert.registerAddon("embeds",{"default":{urlPlaceholder:"type or paste url here"},init:function(b){this.options=a.extend(this.default,b),this.$el=a.fn.mediumInsert.insert.$el,this.setEmbedButtonEvents()},insertButton:function(a){var b="Embed";return("fontawesome"==a||"object"==typeof a&&a.fontawesome)&&(b='<i class="fa fa-code"></i>'),'<button data-addon="embeds" data-action="add" class="medium-editor-action medium-editor-action-image mediumInsert-action">'+b+"</button>"},add:function(b){a.fn.mediumInsert.insert.deselect();var c='<div class="medium-editor-toolbar-form-anchor mediumInsert-embedsWire" style="display: block;"><input type="text" value="" placeholder="'+this.options.urlPlaceholder+'" class="mediumInsert-embedsText"></div>';a(c).appendTo(b.prev()),setTimeout(function(){b.prev().find("input").focus()},50),a.fn.mediumInsert.insert.deselect(),this.currentPlaceholder=b,a(".mediumInsert-embedsText").focus()},setEmbedButtonEvents:function(){var b=this;a(document).on("keypress","input.mediumInsert-embedsText",function(a){(a.which&&13==a.which||a.keyCode&&13==a.keyCode)&&(b.setEnterActionEvents(),b.removeToolbar())}),this.$el.on("blur",".mediumInsert-embedsText",function(){b.removeToolbar()})},setEnterActionEvents:function(){var b=this;if(a.fn.mediumInsert.settings.enabled===!1)return!1;var c=a("input.mediumInsert-embedsText").val();if(!c)return!1;var d=b.convertUrlToEmbedTag(c);return d?(d=a('<div class="mediumInsert-embeds"></div>').append(d),b.currentPlaceholder.parent().append(d),b.currentPlaceholder.closest("[data-medium-element]").trigger("keyup").trigger("input"),void 0):(alert("Incorrect URL format specified"),!1)},removeToolbar:function(){a(".mediumInsert-embedsWire").remove()},convertUrlToEmbedTag:function(a){var b=a.replace(/\n?/g,"").replace(/^((http(s)?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/(watch\?v=|v\/)?)([a-zA-Z0-9-_]+)(.*)?$/,'<div class="video"><iframe width="420" height="315" src="//www.youtube.com/v/$7&amp;fs=1" frameborder="0" allowfullscreen></iframe></div>').replace(/http:\/\/vimeo\.com\/(\d+)$/,'<iframe src="//player.vimeo.com/video/$1" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>').replace(/https:\/\/twitter\.com\/(\w+)\/status\/(\d+)\/?$/,'<blockquote class="twitter-tweet" lang="en"><a href="https://twitter.com/$1/statuses/$2"></a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>').replace(/https:\/\/www\.facebook\.com\/(\w+)\/posts\/(\d+)$/,'<div id="fb-root"></div><script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/all.js#xfbml=1"; fjs.parentNode.insertBefore(js, fjs); }(document, "script", "facebook-jssdk"));</script><div class="fb-post" data-href="https://www.facebook.com/$1/posts/$2"></div>').replace(/http:\/\/instagram\.com\/p\/(.+)\/?$/,'<span class="instagram"><iframe src="//instagram.com/p/$1/embed/" width="612" height="710" frameborder="0" scrolling="no" allowtransparency="true"></iframe></span>');return/<("[^"]*"|'[^']*'|[^'">])*>/.test(b)?b:!1}})}(jQuery);