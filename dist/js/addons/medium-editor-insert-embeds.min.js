/*!
 * medium-editor-insert-plugin v0.1.1 - jQuery insert plugin for MediumEditor
 *
 * Embeds Addon
 *
 * https://github.com/orthes/medium-editor-images-plugin
 *
 * Copyright (c) 2014 Vexus2 (https://github.com/vexus2)
 * Released under the MIT license
 */
!function(a){a.fn.mediumInsert.registerAddon("embeds",{init:function(){this.$el=a.fn.mediumInsert.insert.$el,this.setEmbedButtonEvents()},insertButton:function(a){var b="Embed";return"fontawesome"==a&&(b='<i class="fa fa-code"></i>'),'<button data-addon="embeds" data-action="add" class="medium-editor-action medium-editor-action-image mediumInsert-action">'+b+"</button>"},add:function(b){a(".mediumInsert-embedsPlaceholder").remove(),a.fn.mediumInsert.insert.deselect(),b.append('<div class="mediumInsert-embedsPlaceholder"><div class="mediumInsert-embedsWire"><div class="mediumInsert-embedsBox"><input type="text" class="mediumInsert-embedsText" placeholder="type or paste url here"><button class="mediumInsert-embedsButton">Embed</button></div></div></div>'),this.currentPlaceholder=b,a(".mediumInsert-embedsText").focus()},setEmbedButtonEvents:function(){var b=this;a(document).on("click","button.mediumInsert-embedsButton",function(){b.setEnterActionEvents()}),a(document).on("keypress","input.mediumInsert-embedsText",function(a){(a.which&&13==a.which||a.keyCode&&13==a.keyCode)&&b.setEnterActionEvents()})},setEnterActionEvents:function(){var b=this;if(a.fn.mediumInsert.settings.enabled!==!1){var c=a("input.mediumInsert-embedsText").val();if(c){var d=b.convertUrlToEmbedTag(c);d?(d=a('<div class="mediumInsert-embeds"></div>').append(d),b.currentPlaceholder.parent().append(d)):alert("Incorrect URL format specified"),a(".mediumInsert-embedsPlaceholder").remove()}}},convertUrlToEmbedTag:function(a){var b=a.replace(/\n?/g,"").replace(/https?:\/\/www\.youtube\.com\/watch\?v=(.+?)$/,'<div class="video"><iframe width="420" height="315" src="//www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe></div>').replace(/http:\/\/vimeo\.com\/(\d+)$/,'<iframe src="//player.vimeo.com/video/$1" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>').replace(/https:\/\/twitter\.com\/(\w+)\/status\/(\d+)\/?$/,'<blockquote class="twitter-tweet" lang="ja"><a href="https://twitter.com/$1/statuses/$2"></a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>').replace(/https:\/\/www\.facebook\.com\/(\w+)\/posts\/(\d+)$/,'<div id="fb-root"></div><script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/all.js#xfbml=1"; fjs.parentNode.insertBefore(js, fjs); }(document, "script", "facebook-jssdk"));</script><div class="fb-post" data-href="https://www.facebook.com/$1/posts/$2"></div>').replace(/http:\/\/instagram\.com\/p\/(.+)\/?$/,'<span class="instagram"><iframe src="//instagram.com/p/$1/embed/" width="612" height="710" frameborder="0" scrolling="no" allowtransparency="true"></iframe></span>');return/<("[^"]*"|'[^']*'|[^'">])*>/.test(b)?b:!1}})}(jQuery);